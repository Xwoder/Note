[toc]

# 独立样本 *t* 检验

独立样本 *t* 检验（Independent Sample *t*-test）用于比较**两个独立样本的均值**，以判断它们是否具有显著差异。

---

## **1. 适用场景**
适用于**两组**不同个体的数据，例如：
- **实验组 vs. 对照组**：如新药治疗 vs. 安慰剂对照组的效果比较。
- **两种不同教学方法的效果比较**：如 A 班 vs. B 班的考试成绩。
- **男性 vs. 女性的平均薪资比较**。

**注意**：若数据是同一组个体在不同条件下测量的，需使用**配对样本 *t* 检验**。

---

## **2. 假设**
- **零假设（H₀）**：两组均值相等（$$\mu_1 = \mu_2$$）。
- **备择假设（H₁）**：
  - 双尾检验：两组均值不等（$$\mu_1 \neq \mu_2$$）。
  - 单尾检验：如 $$\mu_1 > \mu_2$$ 或 $$\mu_1 < \mu_2$$。

---

## **3. 计算方法**
设：
- 样本 1 的均值为 $$\bar{X}_1$$，标准差为 $$s_1$$，样本量为 $$n_1$$。
- 样本 2 的均值为 $$\bar{X}_2$$，标准差为 $$s_2$$，样本量为 $$n_2$$。

### **(1) 计算合并标准误**
如果两组方差相等（方差齐性假设），合并标准误计算公式：
$$
s_p = \sqrt{\frac{(n_1-1)s_1^2 + (n_2-1)s_2^2}{n_1+n_2-2}}
$$
$$
SE = s_p \sqrt{\frac{1}{n_1} + \frac{1}{n_2}}
$$

### **(2) 计算 *t* 统计量**
$$
t = \frac{\bar{X}_1 - \bar{X}_2}{SE}
$$
自由度：
$$
df = n_1 + n_2 - 2
$$

### **(3) 计算 *p* 值**
根据自由度查找 *t* 分布表，确定 *p* 值。

- **如果 *p* 值 < 0.05**，拒绝 **H₀**，说明两组均值差异显著。
- **如果 *p* 值 > 0.05**，则不能拒绝 **H₀**，说明两组均值无显著差异。

---

## **4. 代码实现（Python）**
```python
import numpy as np
import scipy.stats as stats

# 生成两组独立样本数据
group1 = $80, 85, 88, 90, 94, 95, 97, 100, 102, 105$  # 组1
group2 = $75, 78, 80, 83, 85, 87, 90, 92, 95, 98$  # 组2

# 进行独立样本 t 检验
t_stat, p_value = stats.ttest_ind(group1, group2, equal_var=True)

print(f"t 统计量: {t_stat:.4f}")
print(f"p 值: {p_value:.4f}")
```
### **解释**
- `stats.ttest_ind(group1, group2, equal_var=True)`: 进行独立样本 *t* 检验，假设两组方差相等。
- 如果方差不等，可使用 `equal_var=False` 进行 **Welch’s *t* 检验**。

---

## **5. 方差齐性检验（Levene 检验）**
独立样本 *t* 检验假设两组方差相等，可以用 **Levene 检验** 检查：
```python
stat, p_value = stats.levene(group1, group2)
print(f"Levene 检验 p 值: {p_value:.4f}")
```
- 如果 *p* 值 < 0.05，说明两组方差不相等，应使用 **Welch’s *t* 检验**（`equal_var=False`）。

---

## **6. 示例分析**
假设我们想研究**两种教学方法对学生考试成绩的影响**，收集了两组独立样本数据：

| 组别 | 学生1 | 学生2 | 学生3 | 学生4 | 学生5 | 学生6 | 学生7 | 学生8 | 学生9 | 学生10 |
| ---- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ------ |
| A 组 | 80    | 85    | 88    | 90    | 94    | 95    | 97    | 100   | 102   | 105    |
| B 组 | 75    | 78    | 80    | 83    | 85    | 87    | 90    | 92    | 95    | 98     |

如果检验结果：
- *p* 值 < 0.05，说明教学方法 A 和 B 在考试成绩上存在显著差异。
- *p* 值 > 0.05，说明两种方法在考试成绩上无显著差异。

---

## **7. Welch’s *t* 检验（适用于方差不等情况）**
如果 Levene 检验表明方差不齐，我们应使用 **Welch’s *t* 检验**：
```python
t_stat, p_value = stats.ttest_ind(group1, group2, equal_var=False)
print(f"Welch’s t 统计量: {t_stat:.4f}")
print(f"p 值: {p_value:.4f}")
```
**Welch’s 检验更适用于方差不等的情况**，因为它调整了自由度。

---

## **8. 结论**
| 方法                  | 适用情况               | 方差齐性         | 计算公式   |
| --------------------- | ---------------------- | ---------------- | ---------- |
| **独立样本 *t* 检验** | 比较两组独立数据的均值 | 假设方差相等     | 传统公式   |
| **Welch’s *t* 检验**  | 两组方差不等           | 无需假设方差相等 | 修正自由度 |

如果数据服从正态分布，并且方差相等，使用**独立样本 *t* 检验**。

如果方差不等，推荐使用 **Welch’s *t* 检验**（`equal_var=False`）。